format_version: "11"
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

workflows:
  default:
    steps:
      - script:
          title: Setup Ubuntu Environment
          inputs:
            - content: |
                #!/bin/bash
                echo "Updating and upgrading Ubuntu packages..."
                sudo apt update && sudo apt upgrade -y
                echo "Installing Python3 and pip..."
                sudo apt install -y python3 python3-pip

      - script:
          title: Install Dependencies
          inputs:
            - content: |
                #!/bin/bash
                echo "Installing Python dependencies..."
                pip install telebot pymongo aiohttp

      - script:
          title: Set Binary Permissions
          inputs:
            - content: |
                #!/bin/bash
                echo "Setting execute permission for 'sharp'..."
                chmod +x sharp

      - script:
          title: Run Python Script
          inputs:
            - content: |
                #!/bin/bash
                echo "Running sharp.py..."
                python3 sharp.py
